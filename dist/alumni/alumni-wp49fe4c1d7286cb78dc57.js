(()=>{class e{constructor(e,t=!1){this.screen_version_class=document.getElementById(e),this.alumniContainer=this.screen_version_class.querySelector(".leadership-alumni"),this.school_filter=this.screen_version_class.querySelector("#school-filter"),this.no_school_filter=this.screen_version_class.querySelector("#no-school-filter"),this.filterButtons=[...this.screen_version_class.querySelectorAll(".alumni-filter-button")],this.filterModeButtons=[...this.screen_version_class.querySelectorAll(".alumni-filter-mode-button")],this.pageLogo=this.screen_version_class.querySelector("#page-logo").querySelector("img"),this.alumniContainer=this.screen_version_class.querySelector(".leadership-alumni"),this.previous_active_button=this.screen_version_class.querySelector(".alumni-filter-button.active"),this.previous_active_mode_button=this.screen_version_class.querySelector(".alumni-filter-mode-button.active"),this.school_filter=this.screen_version_class.querySelector(".School"),this.mobile_version=t,this.filterMode="Year",this.filterGroup="flagship-program",this.filteredAlumni=[],this.alumnis=[],this.isNoSchoolFilter=!0,this.logos={"flagship-program":`${site_url}/wp-content/uploads/2023/10/Lead-Knox-Flagship-RGB.jpg`,"youth-leadership-knoxville":`${site_url}/wp-content/uploads/2023/10/Lead-Knox-Youth-RGB.jpg`,"introduction-knoxville":`${site_url}/wp-content/uploads/2023/10/Lead-Knox-Intro-RGB.jpg`,"leadership-knoxville-scholars":`${site_url}/wp-content/uploads/2023/10/Lead-Knox-Scholars-RGB.jpg`,encore:`${site_url}/wp-content/uploads/2023/10/Lead-Knox-Encore-RGB.jpg`},this.events(),this.init()}async init(){this.displaySpinner(),await this.fetchAlumniData(this.filterGroup),this.filterAlumni()}screen_size_mode_handler(){let e="mobile",t=1;return window.innerWidth>=480&&window.innerWidth<767?e="tablet":window.innerWidth>=767&&window.innerWidth<1200?e="desktop":(window.innerWidth>=1200&&window.innerWidth<1800||window.innerWidth>=1800)&&(e="large-desktop"),"mobile"==e&&(t=2),"tablet"==e&&(t=2),"desktop"==e&&(t=3),"large-desktop"==e&&(t=5),this.screen_size_mode=e,this.screen_size_rows=t,this}events(){this.filterButtons.forEach((e=>{e.addEventListener("click",(async()=>{this.displaySpinner(),this.filterGroup=e.id,null==this.alumnis[this.filterGroup]&&await this.fetchAlumniData(this.filterGroup),"youth-leadership-knoxville"==this.filterGroup?(this.school_filter.style.display="block",this.mobile_version||this.school_filter.previousElementSibling.classList.add("alpha-middle"),this.isNoSchoolFilter=!0):this.isNoSchoolFilter&&(this.school_filter.style.display="none",this.isNoSchoolFilter=!1,this.mobile_version||this.school_filter.previousElementSibling.classList.remove("alpha-middle"),"School"==this.filterMode&&(this.filterMode="Year",this.displayAlumni())),this.previous_active_button.classList.remove("active"),e.classList.add("active"),this.previous_active_button=e,this.filterAlumni()}))})),this.filterModeButtons.forEach((e=>{e.addEventListener("click",(()=>{this.filterMode=e.id,this.previous_active_mode_button.classList.remove("active"),e.classList.add("active"),this.previous_active_mode_button=e,e.classList.add("active"),this.filterAlumni()}))})),window.addEventListener("resize",(()=>{this.screen_size_mode!=this.screen_size_mode_handler().screen_size_mode&&this.filterAlumni()}))}async fetchAlumniData(e){const t=`${site_url}/wp-json/leadership/v1/alumni`;try{const i=`${t}?alumni_program=${e=encodeURIComponent(e)}`,s=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Error: ${s.status} - ${s.statusText}`);const l=(await s.json()).data.alumnis;this.alumnis[e]=l}catch(e){console.error("Error fetching alumni data:",e.message)}}filterAlumni(){if(this.filteredAlumni=this.alumnis[this.filterGroup],"Year"===this.filterMode||null===this.filterMode){this.filteredAlumni=this.groupArrayByYear(this.filteredAlumni);for(const e in this.filteredAlumni)this.filteredAlumni.hasOwnProperty(e)&&(this.filteredAlumni[e]=this.filteredAlumni[e].sort(((e,t)=>{const i=e.title.split(" ").reverse()[0],s=t.title.split(" ").reverse()[0];if(i===s){const i=e.title.split(" ")[0],s=t.title.split(" ")[0];return i.localeCompare(s)}return i.localeCompare(s)})))}else if("Alphabetically"===this.filterMode)this.filteredAlumni=this.groupArrayAlphabetically(this.filteredAlumni);else if("School"===this.filterMode){this.filteredAlumni=this.groupArrayBySchool(this.filteredAlumni);const e={};Object.keys(this.filteredAlumni).sort().forEach((function(t){e[t]=this.filteredAlumni[t]}),this),this.filteredAlumni=e}else this.filteredAlumni=this.groupArrayByYear(this.filteredAlumni);this.displayAlumni()}displayAlumni(){let e;this.alumniContainer.innerHTML="";for(const t in this.filteredAlumni)if(this.filteredAlumni.hasOwnProperty(t)){const i=this.filteredAlumni[t],s=i.length;e=s<12?12:Math.ceil(s/this.screen_size_mode_handler().screen_size_rows);const l=document.createElement("h2");l.classList.add("leadership-alumni__year"),l.textContent=t;const n=document.createElement("div");n.classList.add("leadership-alumni__row");let r=document.createElement("div");r.classList.add("leadership-alumni__column");let o=0;i.forEach((t=>{o%e==0&&(r.children.length>0&&n.appendChild(r.cloneNode(!0)),r=document.createElement("div"),r.classList.add("leadership-alumni__column"));const i=document.createElement("li");i.classList.add("leadership-alumni__item");const s=document.createElement("span");s.classList.add("leadership-alumni__title");let l=t.deceased;"Yes"==l&&s.classList.add("deceased"),s.textContent=t.title.replace("&#8217;","'")+(l&&" â€ ");const a=document.createElement("span");"Alphabetically"!=this.filterMode&&"School"!=this.filterMode||(a.classList.add("leadership-alumni__year"),a.textContent=`(${t.year})`),i.appendChild(s),("Alphabetically"==this.filterMode||"School"==this.filterMode)&&i.appendChild(a),r.appendChild(i),o++})),r.children.length>0&&n.appendChild(r),this.alumniContainer.appendChild(l),this.alumniContainer.appendChild(n)}this.pageLogo.src=this.logos[this.filterGroup],this.hideSpinner()}groupArrayByYear(e){const t={};return e.forEach((e=>{const i=e.year;t[i]||(t[i]=[]),t[i].push(e)})),t}groupArrayAlphabetically(e){const t={};e.forEach(((e,i)=>{const s=e.title,l=(s.charAt(0).toUpperCase(),s.split(" ").reverse()[0].charAt(0).toUpperCase());t[l]||(t[l]=[]),t[l].push(e)}));const i={};return Object.keys(t).sort().forEach((e=>{i[e]=t[e].sort(((e,t)=>{const i=e.title.split(" ").reverse()[0],s=t.title.split(" ").reverse()[0];if(i===s){const i=e.title.split(" ")[0],s=t.title.split(" ")[0];return i.localeCompare(s)}return i.localeCompare(s)}))})),i}groupArrayBySchool(e){const t={};return e.forEach((e=>{const i=e.school;t[i]||(t[i]=[]),t[i].push(e)})),t}displaySpinner(){if(this.alumniContainer.innerHTML="",this.spinner)this.spinner.style.display="flex",this.alumniContainer.appendChild(this.spinner);else{this.spinner=document.createElement("div"),this.spinner.classList.add("spinner-container");const e=document.createElement("div");e.classList.add("spinner");const t=document.createElement("p");t.classList.add("loading-text"),t.textContent="Loading";const i=document.createElement("span");i.id="loading-dots",t.appendChild(i),this.spinner.appendChild(e),e.appendChild(t),this.alumniContainer.appendChild(this.spinner)}}hideSpinner(){this.spinner&&(this.spinner.style.display="none")}}new e("desktop-sort",!1),new e("mobile-sort",!0)})();
//# sourceMappingURL=alumni-wp49fe4c1d7286cb78dc57.js.map